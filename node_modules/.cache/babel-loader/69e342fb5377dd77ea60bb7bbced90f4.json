{"ast":null,"code":"import { useState } from \"react\";\nexport const cohortName = '2110-VPI-WEB-PT'; // Use the APIURL variable for fetch requests\n\nexport const API = `https://strangers-things.herokuapp.com/api/${cohortName}`;\nexport const [authToken, setAuthToken] = useState(\"\");\nexport async function getPosts() {\n  try {\n    const response = await fetch(`${API}/posts`);\n    const result = await response.json();\n    console.log(result);\n    return result;\n  } catch (error) {\n    throw error;\n  }\n}\nexport async function registerNew(regInfo) {\n  try {\n    const response = await fetch(`${API}/users/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(regInfo)\n    });\n    const result = await response.json();\n    console.log(result);\n  } catch (error) {\n    console.error('could not register', error);\n  }\n}\n;\nexport async function loginUser(loginInfo) {\n  fetch(`${API}/users/login`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(loginInfo)\n  }).then(response => response.json()).then(result => {\n    result.data.token ? localStorage.setItem(\"myToken\", result.data.token) : console.log(result);\n    setAuthToken(result.data.token);\n  }).catch(console.error);\n}","map":{"version":3,"sources":["/Users/kieran/Documents/Full Stack/course_work/Strangers.Things/src/api/index.js"],"names":["useState","cohortName","API","authToken","setAuthToken","getPosts","response","fetch","result","json","console","log","error","registerNew","regInfo","method","headers","body","JSON","stringify","loginUser","loginInfo","then","data","token","localStorage","setItem","catch"],"mappings":"AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAO,MAAMC,UAAU,GAAG,iBAAnB,C,CACP;;AACA,OAAO,MAAMC,GAAG,GAAI,8CAA6CD,UAAW,EAArE;AAEP,OAAO,MAAM,CAACE,SAAD,EAAYC,YAAZ,IAA4BJ,QAAQ,CAAC,EAAD,CAA1C;AAEP,OAAO,eAAeK,QAAf,GAA0B;AAC7B,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEL,GAAI,QAAR,CAA5B;AACA,UAAMM,MAAM,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAArB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACA,WAAOA,MAAP;AACD,GALD,CAKE,OAAOI,KAAP,EAAc;AACd,UAAMA,KAAN;AACD;AACF;AAGD,OAAO,eAAeC,WAAf,CAA4BC,OAA5B,EAAqC;AAC1C,MAAG;AACD,UAAMR,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEL,GAAI,iBAAR,EAC5B;AACEa,MAAAA,MAAM,EAAE,MADV;AAEEC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFX;AAKEC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CACJL,OADI;AALR,KAD4B,CAA5B;AAWA,UAAMN,MAAM,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAArB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACD,GAdD,CAcE,OAAOI,KAAP,EAAa;AACbF,IAAAA,OAAO,CAACE,KAAR,CAAc,oBAAd,EAAoCA,KAApC;AACD;AACF;AAAA;AAED,OAAO,eAAeQ,SAAf,CAA0BC,SAA1B,EAAoC;AAC3Cd,EAAAA,KAAK,CAAE,GAAEL,GAAI,cAAR,EAAsB;AACxBa,IAAAA,MAAM,EAAE,MADgB;AAExBC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFe;AAKxBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CACJE,SADI;AALkB,GAAtB,CAAL,CASGC,IATH,CASQhB,QAAQ,IAAIA,QAAQ,CAACG,IAAT,EATpB,EAUEa,IAVF,CAUOd,MAAM,IAAG;AACbA,IAAAA,MAAM,CAACe,IAAP,CAAYC,KAAZ,GAAoBC,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgClB,MAAM,CAACe,IAAP,CAAYC,KAA5C,CAApB,GAAwEd,OAAO,CAACC,GAAR,CAAYH,MAAZ,CAAxE;AACAJ,IAAAA,YAAY,CAACI,MAAM,CAACe,IAAP,CAAYC,KAAb,CAAZ;AACD,GAbF,EAaIG,KAbJ,CAaUjB,OAAO,CAACE,KAblB;AAcA","sourcesContent":["import { useState } from \"react\";\nexport const cohortName = '2110-VPI-WEB-PT';\n// Use the APIURL variable for fetch requests\nexport const API = `https://strangers-things.herokuapp.com/api/${cohortName}`;\n\nexport const [authToken, setAuthToken] = useState(\"\")\n\nexport async function getPosts() {\n    try {\n      const response = await fetch(`${API}/posts`);\n      const result = await response.json();\n      console.log(result)\n      return result;\n    } catch (error) {\n      throw error;\n    }\n  }\n\n\n  export async function registerNew (regInfo) {\n    try{\n      const response = await fetch(`${API}/users/register`,\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(\n          regInfo\n          ),\n      }\n      );\n      const result = await response.json();\n      console.log(result);\n    } catch (error){\n      console.error('could not register', error)\n    }\n  };\n\n  export async function loginUser (loginInfo){\n  fetch(`${API}/users/login`,{\n     method: 'POST',\n     headers: {\n       'Content-Type': 'application/json'\n     },\n     body: JSON.stringify(\n       loginInfo\n       ),\n   }\n   ).then(response => response.json())\n   .then(result =>{\n     result.data.token ? localStorage.setItem(\"myToken\", result.data.token): console.log(result);\n     setAuthToken(result.data.token)\n   }).catch(console.error);\n }\n  \n\n\n"]},"metadata":{},"sourceType":"module"}