{"ast":null,"code":"import React,{useEffect,useState}from'react';import{CreateMessage,CreatePost,IndividualPost}from'.';import{getPosts}from'../api';export var cohortName='2110-VPI-WEB-PT';export var API=\"https://strangers-things.herokuapp.com/api/\".concat(cohortName);import DeletePost from'./DeletePost';import EditPost from'./EditPost';import Search from'./Search';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Posts=function Posts(props){var postsToDisplay=props.postsToDisplay;var setPostsToDisplay=props.setPostsToDisplay;var loadedPosts=props.loadedPosts;var setLoadedPosts=props.setLoadedPosts;useEffect(function(){getPosts().then(function(result){setLoadedPosts(result.data.posts);setPostsToDisplay(result.data.posts);console.log(result);}).catch(function(error){console.error(error);});},[]);return/*#__PURE__*/_jsx(\"div\",{id:\"postspage\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"postsandcreate\",children:[/*#__PURE__*/_jsx(CreatePost,{setLoadedPosts:setLoadedPosts,loadedPosts:loadedPosts,setPostsToDisplay:setPostsToDisplay}),/*#__PURE__*/_jsxs(\"div\",{id:\"posts\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Posts\"}),/*#__PURE__*/_jsx(Search,{loadedPosts:loadedPosts,setPostsToDisplay:setPostsToDisplay}),postsToDisplay.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"indvPosts\",children:[/*#__PURE__*/_jsx(\"p\",{children:item.title}),/*#__PURE__*/_jsx(\"p\",{children:item.author.username}),/*#__PURE__*/_jsx(\"p\",{children:item.createdAt}),/*#__PURE__*/_jsx(\"p\",{children:item.price}),/*#__PURE__*/_jsx(\"p\",{children:item.description}),/*#__PURE__*/_jsx(\"p\",{children:item.location}),/*#__PURE__*/_jsx(\"p\",{children:item.willDeliver}),function(){if(item.isAuthor&&item.messages){return item.messages.map(function(messages,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Messages:\",messages.content]})},\"message\"+messages.post._id+index);});}else{return/*#__PURE__*/_jsx(_Fragment,{});}}(),item.isAuthor?/*#__PURE__*/_jsx(DeletePost,{postId:item._id,setLoadedPosts:setLoadedPosts,loadedPosts:loadedPosts}):/*#__PURE__*/_jsx(_Fragment,{}),item.isAuthor?/*#__PURE__*/_jsx(IndividualPost,{loadedPosts:loadedPosts,postId:item._id,index:index,setPostsToDisplay:setPostsToDisplay}):/*#__PURE__*/_jsx(_Fragment,{}),item.isAuthor?/*#__PURE__*/_jsx(EditPost,{}):/*#__PURE__*/_jsx(\"p\",{}),function(){if(localStorage.getItem(\"myToken\")&&!item.isAuthor){return/*#__PURE__*/_jsx(CreateMessage,{postId:item._id});}else{return/*#__PURE__*/_jsx(_Fragment,{});}}(),/*#__PURE__*/_jsx(\"p\",{children:\"---------\"})]},item._id);})]})]})});};export default Posts;","map":{"version":3,"sources":["/Users/kieran/Documents/Full Stack/course_work/Strangers.Things/src/components/Posts.js"],"names":["React","useEffect","useState","CreateMessage","CreatePost","IndividualPost","getPosts","cohortName","API","DeletePost","EditPost","Search","Posts","props","postsToDisplay","setPostsToDisplay","loadedPosts","setLoadedPosts","then","result","data","posts","console","log","catch","error","map","item","index","title","author","username","createdAt","price","description","location","willDeliver","isAuthor","messages","content","post","_id","localStorage","getItem"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,aAAT,CAAwBC,UAAxB,CAAoCC,cAApC,KAA0D,GAA1D,CACA,OAASC,QAAT,KAAyB,QAAzB,CACA,MAAO,IAAMC,CAAAA,UAAU,CAAG,iBAAnB,CACP,MAAO,IAAMC,CAAAA,GAAG,sDAAiDD,UAAjD,CAAT,CACP,MAAOE,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAQC,CAAAA,QAAR,KAAuB,YAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,6IAEA,GAAMC,CAAAA,KAAK,CAAE,QAAPA,CAAAA,KAAO,CAACC,KAAD,CAAW,CACxB,GAAMC,CAAAA,cAAc,CAAED,KAAK,CAACC,cAA5B,CACA,GAAMC,CAAAA,iBAAiB,CAAEF,KAAK,CAACE,iBAA/B,CACA,GAAMC,CAAAA,WAAW,CAAGH,KAAK,CAACG,WAA1B,CACA,GAAMC,CAAAA,cAAc,CAAEJ,KAAK,CAACI,cAA5B,CAGChB,SAAS,CAAC,UAAM,CACfK,QAAQ,GAAGY,IAAX,CAAgB,SAAAC,MAAM,CAAE,CACtBF,cAAc,CAACE,MAAM,CAACC,IAAP,CAAYC,KAAb,CAAd,CACAN,iBAAiB,CAACI,MAAM,CAACC,IAAP,CAAYC,KAAb,CAAjB,CACAC,OAAO,CAACC,GAAR,CAAYJ,MAAZ,EACD,CAJD,EAIGK,KAJH,CAIS,SAAAC,KAAK,CAAE,CACdH,OAAO,CAACG,KAAR,CAAcA,KAAd,EACD,CAND,EAMG,CAPK,CAOH,EAPG,CAAT,CAWG,mBACI,YAAK,EAAE,CAAE,WAAT,uBACG,aAAK,EAAE,CAAE,gBAAT,wBACA,KAAC,UAAD,EAAY,cAAc,CAAER,cAA5B,CAA4C,WAAW,CAAED,WAAzD,CAAsE,iBAAiB,CAAED,iBAAzF,EADA,cAGA,aAAK,EAAE,CAAG,OAAV,wBACA,6BADA,cAEA,KAAC,MAAD,EAAQ,WAAW,CAAEC,WAArB,CAAkC,iBAAiB,CAAED,iBAArD,EAFA,CAGAD,cAAc,CAACY,GAAf,CAAmB,SAACC,IAAD,CAAOC,KAAP,qBACpB,aAAoB,SAAS,CAAC,WAA9B,wBACA,mBAAID,IAAI,CAACE,KAAT,EADA,cAEA,mBAAIF,IAAI,CAACG,MAAL,CAAYC,QAAhB,EAFA,cAGA,mBAAIJ,IAAI,CAACK,SAAT,EAHA,cAIA,mBAAIL,IAAI,CAACM,KAAT,EAJA,cAKA,mBAAIN,IAAI,CAACO,WAAT,EALA,cAMA,mBAAIP,IAAI,CAACQ,QAAT,EANA,cAOA,mBAAIR,IAAI,CAACS,WAAT,EAPA,CAQI,UAAM,CACN,GAAIT,IAAI,CAACU,QAAL,EAAkBV,IAAI,CAACW,QAA3B,CAAqC,CACnC,MACEX,CAAAA,IAAI,CAACW,QAAL,CAAcZ,GAAd,CAAmB,SAACY,QAAD,CAAWV,KAAX,qBAAqB,kCACtC,iCAAaU,QAAQ,CAACC,OAAtB,GADsC,EAAU,UAAYD,QAAQ,CAACE,IAAT,CAAcC,GAA1B,CAAgCb,KAA1C,CAArB,EAAnB,CADF,CAKD,CAND,IAMO,CACL,mBACE,kBADF,CAGD,CACF,CAZA,EARH,CAsBCD,IAAI,CAACU,QAAL,cAAgB,KAAC,UAAD,EAAY,MAAM,CAAEV,IAAI,CAACc,GAAzB,CAA8B,cAAc,CAAExB,cAA9C,CACjB,WAAW,CAAED,WADI,EAAhB,cAC4B,kBAvB7B,CAwBEW,IAAI,CAACU,QAAL,cAAgB,KAAC,cAAD,EAAgB,WAAW,CAAErB,WAA7B,CAA0C,MAAM,CAAEW,IAAI,CAACc,GAAvD,CAA2D,KAAK,CAAEb,KAAlE,CAAyE,iBAAiB,CAAEb,iBAA5F,EAAhB,cAAkI,kBAxBpI,CAyBCY,IAAI,CAACU,QAAL,cAAgB,KAAC,QAAD,IAAhB,cAA8B,YAzB/B,CA2BE,UAAM,CACV,GAAIK,YAAY,CAACC,OAAb,CAAqB,SAArB,GAAkC,CAAEhB,IAAI,CAACU,QAA7C,CAAwD,CACtD,mBACC,KAAC,aAAD,EAAe,MAAM,CAAEV,IAAI,CAACc,GAA5B,EADD,CAGD,CAJD,IAIO,CACL,mBACE,kBADF,CAGD,CACF,CAVI,EA3BD,cAuCA,gCAvCA,GAAUd,IAAI,CAACc,GAAf,CADoB,EAAnB,CAHA,GAHA,GADH,EADJ,CA0DH,CA5ED,CA8EA,cAAe7B,CAAAA,KAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { CreateMessage, CreatePost, IndividualPost } from '.';\nimport { getPosts } from '../api';\nexport const cohortName = '2110-VPI-WEB-PT';\nexport const API = `https://strangers-things.herokuapp.com/api/${cohortName}`;\nimport DeletePost from './DeletePost';\nimport  EditPost  from './EditPost';\nimport Search from './Search';\n\nconst Posts= (props) => {\nconst postsToDisplay= props.postsToDisplay\nconst setPostsToDisplay= props.setPostsToDisplay\nconst loadedPosts = props.loadedPosts\nconst setLoadedPosts= props.setLoadedPosts\n\n\n useEffect(() => {\n  getPosts().then(result=>{\n    setLoadedPosts(result.data.posts)\n    setPostsToDisplay(result.data.posts)\n    console.log(result)\n  }).catch(error=>{\n    console.error(error)\n  })}, []); \n\n    \n  \n    return (\n        <div id= \"postspage\">\n           <div id =\"postsandcreate\">\n           <CreatePost setLoadedPosts={setLoadedPosts} loadedPosts={loadedPosts} setPostsToDisplay={setPostsToDisplay}/>\n           \n           <div id = \"posts\">\n           <h1>Posts</h1>\n           <Search loadedPosts={loadedPosts} setPostsToDisplay={setPostsToDisplay}/>\n          {postsToDisplay.map((item, index) => \n          <div key={item._id} className='indvPosts'>\n          <p>{item.title}</p>\n          <p>{item.author.username}</p>\n          <p>{item.createdAt}</p>\n          <p>{item.price}</p>\n          <p>{item.description}</p>\n          <p>{item.location}</p>\n          <p>{item.willDeliver}</p>\n            {(() => {\n              if (item.isAuthor && (item.messages)){\n                return (\n                  item.messages.map( (messages, index) => <div key={\"message\" + messages.post._id + index}>\n                    <p>Messages:{messages.content}</p>\n                  </div>)\n                )\n              } else {\n                return (\n                  <></>\n                )\n              }\n            })()} \n\n          {item.isAuthor ? <DeletePost postId={item._id} setLoadedPosts={setLoadedPosts} \n          loadedPosts={loadedPosts}/>: <></>}\n           {item.isAuthor ? <IndividualPost loadedPosts={loadedPosts} postId={item._id}index={index} setPostsToDisplay={setPostsToDisplay}/>: <></>}\n          {item.isAuthor ? <EditPost />: <p></p>}\n\n          {(() => {\n        if (localStorage.getItem(\"myToken\")&& !(item.isAuthor)) {\n          return (\n           <CreateMessage postId={item._id} />\n          )\n        } else {\n          return (\n            <></>\n          )\n        }\n      })()}    \n          \n          <p>---------</p>\n          </div>\n          )}\n           </div>\n           </div>\n        </div>\n      \n        \n    )\n    \n}\n\nexport default Posts"]},"metadata":{},"sourceType":"module"}