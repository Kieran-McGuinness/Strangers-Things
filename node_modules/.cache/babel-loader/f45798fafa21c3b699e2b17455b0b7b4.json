{"ast":null,"code":"import { useState } from \"react\";\nexport const cohortName = '2110-VPI-WEB-PT';\nexport const API = `https://strangers-things.herokuapp.com/api/${cohortName}`; // export async function getPosts() {\n//     try {\n//       const response =  localStorage.getItem(\"myToken\")\n//       ? \n//       await fetch(`${API}/posts`, {\n//         headers: {\n//           'Content-Type': 'application/json',\n//        'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n//         }\n//       })\n//       :\n//       await fetch(`${API}/posts`)\n//       ;\n//       const result = await response.json();\n//       // console.log(result)\n//       return result;\n//     } catch (error) {\n//       throw error;\n//     }\n//   }\n\nexport async function registerNew(regInfo) {\n  try {\n    const response = await fetch(`${API}/users/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(regInfo)\n    });\n    const result = await response.json();\n    console.log(result);\n  } catch (error) {\n    console.error('could not register', error);\n  }\n}\n;\nexport function loginUser(loginInfo) {\n  return fetch(`${API}/users/login`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(loginInfo)\n  }).then(response => response.json()).then(result => {\n    result.data.token ? localStorage.setItem(\"myToken\", result.data.token) : console.log(result);\n    console.log(result);\n    return result;\n  }).catch(console.error);\n}\nexport function createPost(postInfo) {\n  return fetch(`${API}/posts`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n    },\n    body: JSON.stringify(postInfo)\n  }).then(response => response.json()).then(result => {\n    console.log(result);\n    return result;\n  }).catch(console.error);\n}\nexport async function deletePost(postId) {\n  try {\n    const response = await fetch(`${API}/posts/${postId}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n      }\n    });\n    const result = await response.json();\n    console.log(result);\n    return result;\n  } catch (error) {\n    throw error;\n  }\n}\nexport async function getMe() {\n  try {\n    const response = localStorage.getItem(\"myToken\") ? await fetch(`${API}/users/me`, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n      }\n    }) : await fetch(`${API}/users/me`);\n    const result = await response.json(); // console.log(result)\n\n    return result;\n  } catch (error) {\n    throw error;\n  }\n}\nexport async function sendMessage(messageInfo, postId) {\n  try {\n    const response = await fetch(`${API}/posts/${postId}/messages`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n      },\n      body: JSON.stringify(messageInfo)\n    });\n    const result = await response.json();\n    return results;\n    console.log(result);\n  } catch (error) {\n    console.error('could not send message', error);\n  }\n}\n;\nexport async function getIndvPosts(id) {\n  try {\n    const response = localStorage.getItem(\"myToken\") ? await fetch(`${API}/posts/${id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n      }\n    }) : await fetch(`${API}/posts`);\n    const result = await response.json(); // console.log(result)\n\n    return result;\n  } catch (error) {\n    throw error;\n  }\n}\nexport async function editPosts(info, id) {\n  try {\n    const response = await fetch(`${API}/posts/${id}`, {\n      method: \"PATCH\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n      },\n      body: JSON.stringify(info)\n    });\n    const result = await response.json();\n    console.log(result);\n    return result;\n  } catch (error) {\n    throw error;\n  }\n}\nconst {\n  REACT_APP_BASE_URL\n} = process.env;\nexport const callApi = async _ref => {\n  let {\n    url,\n    method,\n    token,\n    body\n  } = _ref;\n  console.log({\n    url,\n    method,\n    token,\n    body\n  });\n\n  try {\n    const options = {\n      method: method ? method.toUpperCase() : 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    };\n\n    if (token) {\n      options.headers['Authorization'] = `Bearer ${token}`;\n    } // console.log('request url: ', REACT_APP_BASE_URL + url)\n    // console.log('options: ', options);\n\n\n    const response = await fetch(REACT_APP_BASE_URL + url, options);\n    const data = await response.json(); // console.log('data: ', data);\n\n    if (data.error) throw data.error;\n    console.log(data);\n    return data;\n  } catch (error) {\n    console.error('ERROR: ', error);\n  }\n}; // REACT_APP_BASE_URL = https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT\n// node app.js\n// process.env.REACT_APP_BASE_URL","map":{"version":3,"sources":["/Users/kieran/Documents/Full Stack/course_work/Strangers.Things/src/api/index.js"],"names":["useState","cohortName","API","registerNew","regInfo","response","fetch","method","headers","body","JSON","stringify","result","json","console","log","error","loginUser","loginInfo","then","data","token","localStorage","setItem","catch","createPost","postInfo","getItem","deletePost","postId","getMe","sendMessage","messageInfo","results","getIndvPosts","id","editPosts","info","REACT_APP_BASE_URL","process","env","callApi","url","options","toUpperCase"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nexport const cohortName = '2110-VPI-WEB-PT';\nexport const API = `https://strangers-things.herokuapp.com/api/${cohortName}`;\n\n\n// export async function getPosts() {\n//     try {\n//       const response =  localStorage.getItem(\"myToken\")\n//       ? \n//       await fetch(`${API}/posts`, {\n//         headers: {\n//           'Content-Type': 'application/json',\n//        'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n//         }\n//       })\n//       :\n//       await fetch(`${API}/posts`)\n//       ;\n//       const result = await response.json();\n//       // console.log(result)\n//       return result;\n//     } catch (error) {\n//       throw error;\n//     }\n//   }\n\n\n  export async function registerNew (regInfo) {\n    try{\n      const response = await fetch(`${API}/users/register`,\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(\n          regInfo\n          ),\n      }\n      );\n      const result = await response.json();\n      console.log(result);\n    } catch (error){\n      console.error('could not register', error)\n    }\n  };\n\n  export function loginUser (loginInfo){\n  return fetch(`${API}/users/login`,{\n     method: 'POST',\n     headers: {\n       'Content-Type': 'application/json'\n     },\n     body: JSON.stringify\n     (\n       loginInfo\n       ),\n   }\n   ).then(response => response.json())\n   .then(result =>{\n     result.data.token ? localStorage.setItem(\"myToken\", result.data.token): console.log(result);\n     console.log(result)\n     return result;\n   }).catch(console.error);\n }\n  \n\n export function createPost (postInfo){\n  return fetch(`${API}/posts`,{\n     method: 'POST',\n     headers: {\n       'Content-Type': 'application/json',\n       'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n     },\n     body: JSON.stringify\n     (\n       postInfo\n       ),\n   }\n   ).then(response => response.json())\n   .then(result =>{\n     console.log(result)\n     return result;\n   }).catch(console.error);\n }\n\n\n export async function deletePost(postId) {\n  try {\n    const response =  await fetch(`${API}/posts/${postId}`, {\n      method:  'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n     'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n      }\n    })\n    ;\n    const result = await response.json();\n    console.log(result)\n    return result;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function getMe() {\n  try {\n    const response =  localStorage.getItem(\"myToken\")\n    ? \n    await fetch(`${API}/users/me`, {\n      headers: {\n        'Content-Type': 'application/json',\n     'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n      }\n    })\n    :\n    await fetch(`${API}/users/me`)\n    ;\n    const result = await response.json();\n    // console.log(result)\n    return result;\n  } catch (error) {\n    throw error;\n  }\n}\n\n\nexport async function sendMessage (messageInfo, postId) {\n  try{\n    const response = await fetch(`${API}/posts/${postId}/messages`,\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n      },\n      body: JSON.stringify(\n        messageInfo\n        ),\n    }\n    );\n    const result = await response.json();\n    return results\n    console.log(result);\n  } catch (error){\n    console.error('could not send message', error)\n  }\n};\n\nexport async function getIndvPosts(id) {\n  try {\n    const response =  localStorage.getItem(\"myToken\")\n    ? \n    await fetch(`${API}/posts/${id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n     'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n      }\n    })\n    :\n    await fetch(`${API}/posts`)\n    ;\n    const result = await response.json();\n    // console.log(result)\n    return result;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function editPosts(info, id) {\n  try {\n    const response =  await fetch(`${API}/posts/${id}`, {\n      method: \"PATCH\",\n      headers: {\n        'Content-Type': 'application/json',\n     'Authorization': `Bearer ${localStorage.getItem(\"myToken\")}`\n      },\n      body: JSON.stringify(\n        info\n      )\n    });\n    const result = await response.json();\n    console.log(result)\n    return result;\n  } catch (error) {\n    throw error;\n  }\n}\n\nconst { REACT_APP_BASE_URL } = process.env;\n\nexport const callApi = async ({ url, method, token, body }) => {\n  console.log({ url, method, token, body })\n  try {\n\n    const options = {\n      method: method ? method.toUpperCase() : 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(body),\n    };\n\n    if (token) {\n      options.headers['Authorization'] = `Bearer ${token}`;\n    }\n    // console.log('request url: ', REACT_APP_BASE_URL + url)\n    // console.log('options: ', options);\n    const response = await fetch(REACT_APP_BASE_URL + url, options);\n    const data = await response.json();\n    // console.log('data: ', data);\n    if (data.error) throw data.error;\n    console.log(data)\n    return data;\n  } catch (error) {\n    console.error('ERROR: ', error);\n  }\n}\n\n\n// REACT_APP_BASE_URL = https://strangers-things.herokuapp.com/api/2110-VPI-WEB-PT\n// node app.js\n\n// process.env.REACT_APP_BASE_URL"]},"metadata":{},"sourceType":"module"}