{"ast":null,"code":"import _asyncToGenerator from\"/Users/kieran/Documents/Full Stack/course_work/Strangers.Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/kieran/Documents/Full Stack/course_work/Strangers.Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/kieran/Documents/Full Stack/course_work/Strangers.Things/node_modules/@babel/runtime/regenerator/index.js\";import{Link}from\"react-router-dom\";import{useEffect,useState}from\"react\";import{loginUser}from\"../api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),loginMessage=_useState2[0],setLoginMessage=_useState2[1];var setCurrentAuthToken=props.setCurrentAuthToken;var currentAuthToken=props.currentAuthToken;var authToken=props.authToken;var setAuthToken=props.setAuthToken;useEffect(function(){localStorage.getItem(\"myToken\")?setCurrentAuthToken(localStorage.getItem(\"myToken\")):setAuthToken(null);},[]);var handleLogOut=function handleLogOut(event){event.preventDefault();localStorage.removeItem(\"myToken\");setCurrentAuthToken(\"\");setAuthToken(null);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var loginInfo,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:loginInfo={user:{username:\"\".concat(username),password:\"\".concat(password)}};event.preventDefault();_context.next=4;return loginUser(loginInfo);case 4:results=_context.sent;setLoginMessage(results.data);setPassword(\"\");setUsername(\"\");setAuthToken(true);setCurrentAuthToken(localStorage.getItem(\"myToken\"));if(results.success){document.getElementsByClassName(\"hidden\")[0].className=\"visible\";document.getElementById(\"float\").innerText=\"\".concat(results.data.message);setTimeout(function(){document.getElementById(\"float\").className=\"hidden\";},5000);}case 11:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var handleUsernameChange=function handleUsernameChange(event){setUsername(event.target.value);};var handlePasswordChange=function handlePasswordChange(event){setPassword(event.target.value);};return authToken?/*#__PURE__*/_jsxs(\"div\",{id:\"loggedIn\",children:[/*#__PURE__*/_jsx(\"p\",{children:loginMessage?loginMessage.message:\"\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleLogOut,children:\"Log Out\"})]}):/*#__PURE__*/_jsx(\"div\",{id:\"login\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:username,onChange:handleUsernameChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"password\",value:password,onChange:handlePasswordChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Need to register?\"})]})});};export default LoginForm;","map":{"version":3,"sources":["/Users/kieran/Documents/Full Stack/course_work/Strangers.Things/src/components/LoginForm.js"],"names":["Link","useEffect","useState","loginUser","LoginForm","props","loginMessage","setLoginMessage","setCurrentAuthToken","currentAuthToken","authToken","setAuthToken","localStorage","getItem","handleLogOut","event","preventDefault","removeItem","handleSubmit","loginInfo","user","username","password","results","data","setPassword","setUsername","success","document","getElementsByClassName","className","getElementById","innerText","message","setTimeout","handleUsernameChange","target","value","handlePasswordChange"],"mappings":"kcAAA,OAASA,IAAT,KAAqB,kBAArB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,SAAT,KAA0B,QAA1B,C,wFAGA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAU,CACxB,cAAwCH,QAAQ,CAAC,EAAD,CAAhD,wCAAOI,YAAP,eAAqBC,eAArB,eACA,GAAMC,CAAAA,mBAAmB,CAAGH,KAAK,CAACG,mBAAlC,CACA,GAAMC,CAAAA,gBAAgB,CAAGJ,KAAK,CAACI,gBAA/B,CACJ,GAAMC,CAAAA,SAAS,CAAGL,KAAK,CAACK,SAAxB,CACA,GAAMC,CAAAA,YAAY,CAAGN,KAAK,CAACM,YAA3B,CACIV,SAAS,CAAC,UAAM,CACZW,YAAY,CAACC,OAAb,CAAqB,SAArB,EAEAL,mBAAmB,CAACI,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAD,CAFnB,CAIAF,YAAY,CAAC,IAAD,CAJZ,CAKH,CANQ,CAMN,EANM,CAAT,CASJ,GAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC5BA,KAAK,CAACC,cAAN,GACJJ,YAAY,CAACK,UAAb,CAAwB,SAAxB,EACAT,mBAAmB,CAAC,EAAD,CAAnB,CACAG,YAAY,CAAC,IAAD,CAAZ,CACC,CALD,CAQA,GAAMO,CAAAA,YAAY,0FAAG,iBAAOH,KAAP,wIACbI,SADa,CACD,CACZC,IAAI,CAAE,CACFC,QAAQ,WAAKA,QAAL,CADN,CAEFC,QAAQ,WAAKA,QAAL,CAFN,CADM,CADC,CAOrBP,KAAK,CAACC,cAAN,GAPqB,sBAQCb,CAAAA,SAAS,CAACgB,SAAD,CARV,QAQfI,OARe,eASrBhB,eAAe,CAACgB,OAAO,CAACC,IAAT,CAAf,CACAC,WAAW,CAAC,EAAD,CAAX,CACAC,WAAW,CAAC,EAAD,CAAX,CACAf,YAAY,CAAC,IAAD,CAAZ,CACAH,mBAAmB,CAACI,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAD,CAAnB,CACA,GAAGU,OAAO,CAACI,OAAX,CAAmB,CACfC,QAAQ,CAACC,sBAAT,CAAgC,QAAhC,EAA0C,CAA1C,EAA6CC,SAA7C,CAAuD,SAAvD,CACAF,QAAQ,CAACG,cAAT,CAAwB,OAAxB,EAAiCC,SAAjC,WAAgDT,OAAO,CAACC,IAAR,CAAaS,OAA7D,EACAC,UAAU,CAAC,UAAU,CACjBN,QAAQ,CAACG,cAAT,CAAwB,OAAxB,EAAiCD,SAAjC,CAA2C,QAA3C,CACH,CAFS,CAER,IAFQ,CAAV,CAGH,CApBoB,uDAAH,kBAAZZ,CAAAA,YAAY,4CAAlB,CAuBA,eAAgChB,QAAQ,CAAC,EAAD,CAAxC,yCAAOmB,QAAP,eAAiBK,WAAjB,eACA,eAAgCxB,QAAQ,CAAC,EAAD,CAAxC,yCAAOoB,QAAP,eAAiBG,WAAjB,eACA,GAAMU,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACpB,KAAD,CAAU,CACvCW,WAAW,CAACX,KAAK,CAACqB,MAAN,CAAaC,KAAd,CAAX,CACC,CAFD,CAGA,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACvB,KAAD,CAAU,CACvCU,WAAW,CAACV,KAAK,CAACqB,MAAN,CAAaC,KAAd,CAAX,CACC,CAFD,CAMI,MACI3B,CAAAA,SAAS,cACT,aAAK,EAAE,CAAC,UAAR,wBACA,mBAAIJ,YAAY,CAAEA,YAAY,CAAC2B,OAAf,CAAyB,EAAzC,EADA,cAEA,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAEnB,YAA/B,qBAFA,GADS,cAMT,YAAK,EAAE,CAAE,OAAT,uBACI,cAAM,QAAQ,CAAEI,YAAhB,wBACI,cAAO,OAAO,CAAC,UAAf,uBADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAoB,IAAI,CAAC,UAAzB,CAAoC,KAAK,CAAEG,QAA3C,CAAsD,QAAQ,CAAEc,oBAAhE,EAFJ,cAGI,cAAO,OAAO,CAAC,UAAf,uBAHJ,cAII,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,UAAxB,CAAmC,KAAK,CAAEb,QAA1C,CAAoD,QAAQ,CAAEgB,oBAA9D,EAJJ,cAKI,eAAQ,IAAI,CAAC,QAAb,oBALJ,cAMI,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,+BANJ,GADJ,EAPJ,CAmBH,CA5ED,CA+EA,cAAelC,CAAAA,SAAf","sourcesContent":["import { Link } from \"react-router-dom\"\nimport { useEffect, useState } from \"react\"\nimport { loginUser } from \"../api\"\n\n\nconst LoginForm = (props) =>{\n    const [loginMessage, setLoginMessage] = useState([])\n    const setCurrentAuthToken = props.setCurrentAuthToken\n    const currentAuthToken = props.currentAuthToken\nconst authToken = props.authToken\nconst setAuthToken = props.setAuthToken \n    useEffect(() => {\n        localStorage.getItem(\"myToken\")\n        ?\n        setCurrentAuthToken(localStorage.getItem(\"myToken\"))\n        :\n        setAuthToken(null)\n    }, [])\n   \n\nconst handleLogOut = (event) => {\n    event.preventDefault()\nlocalStorage.removeItem(\"myToken\")\nsetCurrentAuthToken(\"\")\nsetAuthToken(null)\n}    \n\n\nconst handleSubmit = async (event) =>{\n    let loginInfo = {\n        user: {\n            username: `${username}`,\n            password: `${password}`\n        }\n        }\nevent.preventDefault()\nconst results = await loginUser(loginInfo)\nsetLoginMessage(results.data)\nsetPassword(\"\")\nsetUsername(\"\")\nsetAuthToken(true)\nsetCurrentAuthToken(localStorage.getItem(\"myToken\"))\nif(results.success){\n    document.getElementsByClassName(\"hidden\")[0].className=\"visible\"\n    document.getElementById(\"float\").innerText = `${results.data.message}`\n    setTimeout(function(){\n        document.getElementById(\"float\").className=\"hidden\";\n    },5000)\n}\n}\n\nconst [username, setUsername] = useState(\"\")\nconst [password, setPassword] = useState(\"\")\nconst handleUsernameChange = (event) =>{\nsetUsername(event.target.value)\n}\nconst handlePasswordChange = (event) =>{\nsetPassword(event.target.value)\n}\n\n\n\n    return (\n        authToken ?\n        <div id=\"loggedIn\">\n        <p>{loginMessage? loginMessage.message : \"\"}</p>\n        <button type=\"submit\" onClick={handleLogOut}>Log Out</button>\n        </div>\n        :\n        <div id =\"login\">\n            <form onSubmit={handleSubmit}>\n                <label htmlFor=\"username\">Username:</label>\n                <input type=\"text\"  name=\"username\" value={username}  onChange={handleUsernameChange}/>\n                <label htmlFor=\"password\">Password:</label>\n                <input type=\"text\" name=\"password\" value={password} onChange={handlePasswordChange}/>\n                <button type=\"submit\">Submit</button>\n                <Link to=\"/register\">Need to register?</Link>\n            </form>\n        </div>\n        \n    )\n}\n\n\nexport default LoginForm\n\n\n"]},"metadata":{},"sourceType":"module"}