{"ast":null,"code":"import _asyncToGenerator from\"/Users/kieran/Documents/Full Stack/course_work/Strangers.Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/kieran/Documents/Full Stack/course_work/Strangers.Things/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{deletePost}from\"../api\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";var DeletePost=function DeletePost(props){var history=useHistory();var postId=props.postId;var setLoadedPosts=props.setLoadedPosts;var loadedPosts=props.loadedPosts;var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,newPosts;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(postId);history.push(\"/posts\");_context.next=4;return deletePost(postId);case 4:data=_context.sent;if(data.success){newPosts=loadedPosts.filter(function(post){return post._id!==postId;});setLoadedPosts(newPosts);setPostsToDisplay(newPosts);}case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleDelete(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{id:\"deletepost\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,children:\"Delete\"})});};export default DeletePost;","map":{"version":3,"sources":["/Users/kieran/Documents/Full Stack/course_work/Strangers.Things/src/components/DeletePost.js"],"names":["React","deletePost","useHistory","DeletePost","props","history","postId","setLoadedPosts","loadedPosts","handleDelete","console","log","push","data","success","newPosts","filter","post","_id","setPostsToDisplay"],"mappings":"6SAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,QAA3B,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,2CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,KAAD,CAAU,CACzB,GAAMC,CAAAA,OAAO,CAAGH,UAAU,EAA1B,CACA,GAAMI,CAAAA,MAAM,CAAGF,KAAK,CAACE,MAArB,CACA,GAAMC,CAAAA,cAAc,CAAGH,KAAK,CAACG,cAA7B,CACA,GAAMC,CAAAA,WAAW,CAAEJ,KAAK,CAACI,WAAzB,CACF,GAAOC,CAAAA,YAAY,0FAAG,qJAClBC,OAAO,CAACC,GAAR,CAAYL,MAAZ,EACAD,OAAO,CAACO,IAAR,CAAa,QAAb,EAFkB,sBAGCX,CAAAA,UAAU,CAACK,MAAD,CAHX,QAGZO,IAHY,eAIlB,GAAIA,IAAI,CAACC,OAAT,CAAiB,CACXC,QADW,CACAP,WAAW,CAACQ,MAAZ,CAAmB,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACC,GAAL,GAAaZ,MAAvB,EAAnB,CADA,CAEjBC,cAAc,CAACQ,QAAD,CAAd,CACAI,iBAAiB,CAACJ,QAAD,CAAjB,CACC,CARiB,sDAAH,kBAAZN,CAAAA,YAAY,0CAAnB,CAWE,mBACI,YAAK,EAAE,CAAG,YAAV,uBACR,eAAQ,OAAO,CAAEA,YAAjB,oBADQ,EADJ,CAKH,CArBD,CAyBA,cAAeN,CAAAA,UAAf","sourcesContent":["import React from \"react\"\nimport { deletePost } from \"../api\"\nimport { useHistory } from \"react-router-dom\"\n\nconst DeletePost = (props) =>{\n    const history = useHistory()\n    const postId = props.postId\n    const setLoadedPosts = props.setLoadedPosts\n    const loadedPosts= props.loadedPosts\n  const  handleDelete = async () =>{\n      console.log(postId)\n      history.push(\"/posts\")\n      const data = await deletePost(postId)\n      if (data.success){\n      const newPosts = loadedPosts.filter((post) => post._id !== postId)\n      setLoadedPosts(newPosts)\n      setPostsToDisplay(newPosts)\n      }\n    \n  }\n    return (\n        <div id = \"deletepost\">\n<button onClick={handleDelete}>Delete</button>\n        </div>\n    )\n}\n\n\n\nexport default DeletePost"]},"metadata":{},"sourceType":"module"}